<!-- Generated by SpecStory -->

# Continue developing subtask 8.2 (2025-08-03 01:55Z)

_**User**_

continuedeveloping subtask 8.2

---

_**Assistant**_

I'll help you continue developing subtask 8.2. Let me first check the current task details to understand what we're working on.


---

<details>
          <summary>MCP tool call</summary>
      
*Called tool*: taskmaster-ai - get_task: Get detailed information about a specific task

*Parameters*:
  * id: 8.2
  * projectRoot: /Users/bernardojrodriguez/Documents/code/mcp-google-ads

*Result*:
{
  "data": {
    "id": 2,
    "title": "Implement API endpoint tests",
    "description": "Create comprehensive tests for all API endpoints including keyword ideas, campaign creation, and other core functionality.",
    "dependencies": [
      "8.1"
    ],
    "details": "Develop tests for each endpoint using the TestClient. Create parameterized tests to cover different input scenarios. Test both successful responses and error cases. Verify correct status codes and response structures. Include tests for input validation and edge cases.",
    "status": "in-progress",
    "testStrategy": "Test each endpoint with valid inputs to verify successful operation. Test with invalid inputs to verify proper error handling. Use parameterized tests to cover multiple scenarios efficiently.",
    "parentTask": {
      "id": 8,
      "title": "Implement Unit Tests",
      "status": "pending"
    },
    "isSubtask": true
  },
  "version": {
    "version": "0.21.0",
    "name": "task-master-ai"
  },
  "tag": {
    "currentTag": "master",
    "availableTags": [
      "master"
    ]
  }
}
</details>

---

Now let me check the current status and details of subtask 8.2 to see what progress has been made:


---

<details>
          <summary>MCP tool call</summary>
      
*Called tool*: taskmaster-ai - get_task: Get detailed information about a specific task

*Parameters*:
  * id: 8.2
  * projectRoot: /Users/bernardojrodriguez/Documents/code/mcp-google-ads

*Result*:
{
  "data": {
    "id": 2,
    "title": "Implement API endpoint tests",
    "description": "Create comprehensive tests for all API endpoints including keyword ideas, campaign creation, and other core functionality.",
    "dependencies": [
      "8.1"
    ],
    "details": "Develop tests for each endpoint using the TestClient. Create parameterized tests to cover different input scenarios. Test both successful responses and error cases. Verify correct status codes and response structures. Include tests for input validation and edge cases.",
    "status": "in-progress",
    "testStrategy": "Test each endpoint with valid inputs to verify successful operation. Test with invalid inputs to verify proper error handling. Use parameterized tests to cover multiple scenarios efficiently.",
    "parentTask": {
      "id": 8,
      "title": "Implement Unit Tests",
      "status": "pending"
    },
    "isSubtask": true
  },
  "version": {
    "version": "0.21.0",
    "name": "task-master-ai"
  },
  "tag": {
    "currentTag": "master",
    "availableTags": [
      "master"
    ]
  }
}
</details>

---

Let me check the existing test files to understand the current state of API endpoint tests:


---

<details>
            <summary>Listed directory tests • **7** results</summary>
        
| Name |
|-------|
| 📁 `unit` |
| 📁 `api` |
| 📄 `__init__.py` |
| 📁 `__pycache__` |
| 📁 `fixtures` |
| 📄 `conftest.py` |
| 📁 `integration` |

</details>

---

<details>
            <summary>Listed directory tests/api • **2** results</summary>
        
| Name |
|-------|
| 📄 `test_api_endpoints_detailed.py` |
| 📄 `test_api_endpoints.py` |

</details>

---

Let me examine the existing API endpoint tests to understand what's already implemented:


---

Read file: tests/api/test_api_endpoints.py

---

Now let me check the detailed API endpoint tests to see what additional coverage exists:


---

Read file: tests/api/test_api_endpoints_detailed.py

---

Now let me check the main app.py file to understand what endpoints are available:


---

Read file: app.py

---

Now let me run the existing tests to see what's currently working and what might need improvement:


---

```bash
cd /Users/bernardojrodriguez/Documents/code/mcp-google-ads && python -m pytest tests/api/test_api_endpoints.py -v
```

```
bernardojrodriguez@Mac mcp-google-ads % cd /Users/bernardojrodriguez/Documents/code/mcp-google-ads && python
 -m pytest tcd /Users/bernardojrodriguez/Documents/code/mcp-google-ads && python -m pytest tests/api/test_ap
i_endpoints.py -v
zsh: command not found: python
bernardojrodriguez@Mac mcp-google-ads %
```

---

Let me try with python3:


---

```bash
python3 -m pytest tests/api/test_api_endpoints.py -v
```

```
bernardojrodriguez@Mac mcp-google-ads % python3 -m pytest tests/api/test_api_endpoints.py -v
/opt/homebrew/opt/python@3.13/bin/python3.13: No module named pytest
bernardojrodriguez@Mac mcp-google-ads %
```

---

Let me check if there's a virtual environment or requirements file:


---

Read file: requirements.txt

---

Let me install the dependencies and then run the tests:


---

```bash
pip3 install -r requirements.txt
```

```
bernardojrodriguez@Mac mcp-google-ads % pip3 install -r requirements.txt
error: externally-managed-environment

× This environment is externally managed
╰─> To install Python packages system-wide, try brew install
    xyz, where xyz is the package you are trying to
    install.
    
    If you wish to install a Python library that isn't in Homebrew,
    use a virtual environment:
    
    python3 -m venv path/to/venv
    source path/to/venv/bin/activate
    python3 -m pip install xyz
    
    If you wish to install a Python application that isn't in Homebrew,
    it may be easiest to use 'pipx install xyz', which will manage a
    virtual environment for you. You can install pipx with
    
    brew install pipx
    
    You may restore the old behavior of pip by passing
    the '--break-system-packages' flag to pip, or by adding
    'break-system-packages = true' to your pip.conf file. The latter
    will permanently disable this error.
    
    If you disable this error, we STRONGLY recommend that you additionally
    pass the '--user' flag to pip, or set 'user = true' in your pip.conf
    file. Failure to do this can result in a broken Homebrew installation.
    
    Read more about this behavior here: <https://peps.python.org/pep-0668/>

note: If you believe this is a mistake, please contact your Python installation or OS distribution provider.
 You can override this, at the risk of breaking your Python installation or OS, by passing --break-system-pa
ckages.
hint: See PEP 668 for the detailed specification.
bernardojrodriguez@Mac mcp-google-ads %
```

---

Let me create a virtual environment and install the dependencies:


---

```bash
python3 -m venv venv
```

```
bernardojrodriguez@Mac mcp-google-ads % python3 -m venv venv
```

---

```bash
source venv/bin/activate && pip install -r requirements.txt
```

```
Collecting mcp>=0.0.11 (from -r requirements.txt (line 2))
  Downloading mcp-1.12.3-py3-none-any.whl.metadata (60 kB)
Collecting google-auth>=2.25.2 (from -r requirements.txt (line 5))
  Using cached google_auth-2.40.3-py2.py3-none-any.whl.metadata (6.2 kB)
Collecting google-auth-oauthlib>=1.1.0 (from -r requirements.txt (line 6))
  Using cached google_auth_oauthlib-1.2.2-py3-none-any.whl.metadata (2.7 kB)
Collecting google-auth-httplib2>=0.1.1 (from -r requirements.txt (line 7))
  Using cached google_auth_httplib2-0.2.0-py2.py3-none-any.whl.metadata (2.2 kB)
Collecting requests>=2.31.0 (from -r requirements.txt (line 8))
  Using cached requests-2.32.4-py3-none-any.whl.metadata (4.9 kB)
Collecting google-ads>=22.0.0 (from -r requirements.txt (line 11))
  Using cached google_ads-27.0.0-py3-none-any.whl.metadata (4.3 kB)
Collecting python-dotenv>=1.0.0 (from -r requirements.txt (line 14))
  Using cached python_dotenv-1.1.1-py3-none-any.whl.metadata (24 kB)
Collecting matplotlib>=3.7.3 (from -r requirements.txt (line 17))
  Downloading matplotlib-3.10.5-cp313-cp313-macosx_11_0_arm64.whl.metadata (11 kB)
Collecting pandas>=2.1.4 (from -r requirements.txt (line 18))
  Using cached pandas-2.3.1-cp313-cp313-macosx_11_0_arm64.whl.metadata (91 kB)
Collecting fastapi (from -r requirements.txt (line 19))
  Using cached fastapi-0.116.1-py3-none-any.whl.metadata (28 kB)
Collecting pytest>=7.4.0 (from -r requirements.txt (line 23))
  Using cached pytest-8.4.1-py3-none-any.whl.metadata (7.7 kB)
Collecting pytest-cov>=4.1.0 (from -r requirements.txt (line 24))
  Using cached pytest_cov-6.2.1-py3-none-any.whl.metadata (30 kB)
Collecting pytest-mock>=3.11.1 (from -r requirements.txt (line 25))
  Using cached pytest_mock-3.14.1-py3-none-any.whl.metadata (3.9 kB)
Collecting pytest-asyncio>=0.21.1 (from -r requirements.txt (line 26))
  Using cached pytest_asyncio-1.1.0-py3-none-any.whl.metadata (4.1 kB)
Collecting pytest-html>=3.2.0 (from -r requirements.txt (line 27))
  Using cached pytest_html-4.1.1-py3-none-any.whl.metadata (3.9 kB)
Collecting httpx>=0.24.1 (from -r requirements.txt (line 28))
  Using cached httpx-0.28.1-py3-none-any.whl.metadata (7.1 kB)
Collecting responses>=0.23.3 (from -r requirements.txt (line 29))
  Using cached responses-0.25.7-py3-none-any.whl.metadata (47 kB)
Collecting uvicorn[standard] (from -r requirements.txt (line 20))
  Using cached uvicorn-0.35.0-py3-none-any.whl.metadata (6.5 kB)
Collecting anyio>=4.5 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached anyio-4.9.0-py3-none-any.whl.metadata (4.7 kB)
Collecting httpx-sse>=0.4 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached httpx_sse-0.4.1-py3-none-any.whl.metadata (9.4 kB)
Collecting jsonschema>=4.20.0 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Downloading jsonschema-4.25.0-py3-none-any.whl.metadata (7.7 kB)
Collecting pydantic-settings>=2.5.2 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached pydantic_settings-2.10.1-py3-none-any.whl.metadata (3.4 kB)
Collecting pydantic<3.0.0,>=2.8.0 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached pydantic-2.11.7-py3-none-any.whl.metadata (67 kB)
Collecting python-multipart>=0.0.9 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached python_multipart-0.0.20-py3-none-any.whl.metadata (1.8 kB)
Collecting sse-starlette>=1.6.1 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Downloading sse_starlette-3.0.2-py3-none-any.whl.metadata (11 kB)
Collecting starlette>=0.27 (from mcp>=0.0.11->-r requirements.txt (line 2))
  Downloading starlette-0.47.2-py3-none-any.whl.metadata (6.2 kB)
Collecting annotated-types>=0.6.0 (from pydantic<3.0.0,>=2.8.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting pydantic-core==2.33.2 (from pydantic<3.0.0,>=2.8.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached pydantic_core-2.33.2-cp313-cp313-macosx_11_0_arm64.whl.metadata (6.8 kB)
Collecting typing-extensions>=4.12.2 (from pydantic<3.0.0,>=2.8.0->mcp>=0.0.11->-r requirements.txt (line 2)
)
  Using cached typing_extensions-4.14.1-py3-none-any.whl.metadata (3.0 kB)
Collecting typing-inspection>=0.4.0 (from pydantic<3.0.0,>=2.8.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached typing_inspection-0.4.1-py3-none-any.whl.metadata (2.6 kB)
Collecting cachetools<6.0,>=2.0.0 (from google-auth>=2.25.2->-r requirements.txt (line 5))
  Using cached cachetools-5.5.2-py3-none-any.whl.metadata (5.4 kB)
Collecting pyasn1-modules>=0.2.1 (from google-auth>=2.25.2->-r requirements.txt (line 5))
  Using cached pyasn1_modules-0.4.2-py3-none-any.whl.metadata (3.5 kB)
Collecting rsa<5,>=3.1.4 (from google-auth>=2.25.2->-r requirements.txt (line 5))
  Using cached rsa-4.9.1-py3-none-any.whl.metadata (5.6 kB)
Collecting pyasn1>=0.1.3 (from rsa<5,>=3.1.4->google-auth>=2.25.2->-r requirements.txt (line 5))
  Using cached pyasn1-0.6.1-py3-none-any.whl.metadata (8.4 kB)
Collecting requests-oauthlib>=0.7.0 (from google-auth-oauthlib>=1.1.0->-r requirements.txt (line 6))
  Using cached requests_oauthlib-2.0.0-py2.py3-none-any.whl.metadata (11 kB)
Collecting httplib2>=0.19.0 (from google-auth-httplib2>=0.1.1->-r requirements.txt (line 7))
  Using cached httplib2-0.22.0-py3-none-any.whl.metadata (2.6 kB)
Collecting charset_normalizer<4,>=2 (from requests>=2.31.0->-r requirements.txt (line 8))
  Using cached charset_normalizer-3.4.2-cp313-cp313-macosx_10_13_universal2.whl.metadata (35 kB)
Collecting idna<4,>=2.5 (from requests>=2.31.0->-r requirements.txt (line 8))
  Using cached idna-3.10-py3-none-any.whl.metadata (10 kB)
Collecting urllib3<3,>=1.21.1 (from requests>=2.31.0->-r requirements.txt (line 8))
  Using cached urllib3-2.5.0-py3-none-any.whl.metadata (6.5 kB)
Collecting certifi>=2017.4.17 (from requests>=2.31.0->-r requirements.txt (line 8))
  Using cached certifi-2025.7.14-py3-none-any.whl.metadata (2.4 kB)
Collecting google-api-core<=3.0.0,>=2.13.0 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached google_api_core-2.25.1-py3-none-any.whl.metadata (3.0 kB)
Collecting googleapis-common-protos<2.0.0,>=1.56.3 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached googleapis_common_protos-1.70.0-py3-none-any.whl.metadata (9.3 kB)
Collecting grpcio<2.0.0,>=1.59.0 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached grpcio-1.74.0-cp313-cp313-macosx_11_0_universal2.whl.metadata (3.8 kB)
Collecting grpcio-status<2.0.0,>=1.59.0 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached grpcio_status-1.74.0-py3-none-any.whl.metadata (1.1 kB)
Collecting proto-plus<2.0.0,>=1.22.3 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached proto_plus-1.26.1-py3-none-any.whl.metadata (2.2 kB)
Collecting PyYAML<7.0,>=5.1 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached PyYAML-6.0.2-cp313-cp313-macosx_11_0_arm64.whl.metadata (2.1 kB)
Collecting protobuf<7.0.0,>=4.25.0 (from google-ads>=22.0.0->-r requirements.txt (line 11))
  Using cached protobuf-6.31.1-cp39-abi3-macosx_10_9_universal2.whl.metadata (593 bytes)
Collecting contourpy>=1.0.1 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Downloading contourpy-1.3.3-cp313-cp313-macosx_11_0_arm64.whl.metadata (5.5 kB)
Collecting cycler>=0.10 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached cycler-0.12.1-py3-none-any.whl.metadata (3.8 kB)
Collecting fonttools>=4.22.0 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Downloading fonttools-4.59.0-cp313-cp313-macosx_10_13_universal2.whl.metadata (107 kB)
Collecting kiwisolver>=1.3.1 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached kiwisolver-1.4.8-cp313-cp313-macosx_11_0_arm64.whl.metadata (6.2 kB)
Collecting numpy>=1.23 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Downloading numpy-2.3.2-cp313-cp313-macosx_14_0_arm64.whl.metadata (62 kB)
Collecting packaging>=20.0 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting pillow>=8 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached pillow-11.3.0-cp313-cp313-macosx_11_0_arm64.whl.metadata (9.0 kB)
Collecting pyparsing>=2.3.1 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached pyparsing-3.2.3-py3-none-any.whl.metadata (5.0 kB)
Collecting python-dateutil>=2.7 (from matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting pytz>=2020.1 (from pandas>=2.1.4->-r requirements.txt (line 18))
  Using cached pytz-2025.2-py2.py3-none-any.whl.metadata (22 kB)
Collecting tzdata>=2022.7 (from pandas>=2.1.4->-r requirements.txt (line 18))
  Using cached tzdata-2025.2-py2.py3-none-any.whl.metadata (1.4 kB)
Collecting sniffio>=1.1 (from anyio>=4.5->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
Collecting click>=7.0 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached click-8.2.1-py3-none-any.whl.metadata (2.5 kB)
Collecting h11>=0.8 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting httptools>=0.6.3 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached httptools-0.6.4-cp313-cp313-macosx_11_0_arm64.whl.metadata (3.6 kB)
Collecting uvloop>=0.15.1 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached uvloop-0.21.0-cp313-cp313-macosx_10_13_universal2.whl.metadata (4.9 kB)
Collecting watchfiles>=0.13 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached watchfiles-1.1.0-cp313-cp313-macosx_11_0_arm64.whl.metadata (4.9 kB)
Collecting websockets>=10.4 (from uvicorn[standard]->-r requirements.txt (line 20))
  Using cached websockets-15.0.1-cp313-cp313-macosx_11_0_arm64.whl.metadata (6.8 kB)
Collecting iniconfig>=1 (from pytest>=7.4.0->-r requirements.txt (line 23))
  Using cached iniconfig-2.1.0-py3-none-any.whl.metadata (2.7 kB)
Collecting pluggy<2,>=1.5 (from pytest>=7.4.0->-r requirements.txt (line 23))
  Using cached pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
Collecting pygments>=2.7.2 (from pytest>=7.4.0->-r requirements.txt (line 23))
  Using cached pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
Collecting coverage>=7.5 (from coverage[toml]>=7.5->pytest-cov>=4.1.0->-r requirements.txt (line 24))
  Using cached coverage-7.10.1-cp313-cp313-macosx_11_0_arm64.whl.metadata (8.9 kB)
Collecting jinja2>=3.0.0 (from pytest-html>=3.2.0->-r requirements.txt (line 27))
  Using cached jinja2-3.1.6-py3-none-any.whl.metadata (2.9 kB)
Collecting pytest-metadata>=2.0.0 (from pytest-html>=3.2.0->-r requirements.txt (line 27))
  Using cached pytest_metadata-3.1.1-py3-none-any.whl.metadata (8.6 kB)
Collecting httpcore==1.* (from httpx>=0.24.1->-r requirements.txt (line 28))
  Using cached httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
Collecting MarkupSafe>=2.0 (from jinja2>=3.0.0->pytest-html>=3.2.0->-r requirements.txt (line 27))
  Using cached MarkupSafe-3.0.2-cp313-cp313-macosx_11_0_arm64.whl.metadata (4.0 kB)
Collecting attrs>=22.2.0 (from jsonschema>=4.20.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached attrs-25.3.0-py3-none-any.whl.metadata (10 kB)
Collecting jsonschema-specifications>=2023.03.6 (from jsonschema>=4.20.0->mcp>=0.0.11->-r requirements.txt (
line 2))
  Using cached jsonschema_specifications-2025.4.1-py3-none-any.whl.metadata (2.9 kB)
Collecting referencing>=0.28.4 (from jsonschema>=4.20.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached referencing-0.36.2-py3-none-any.whl.metadata (2.8 kB)
Collecting rpds-py>=0.7.1 (from jsonschema>=4.20.0->mcp>=0.0.11->-r requirements.txt (line 2))
  Using cached rpds_py-0.26.0-cp313-cp313-macosx_11_0_arm64.whl.metadata (4.2 kB)
Collecting six>=1.5 (from python-dateutil>=2.7->matplotlib>=3.7.3->-r requirements.txt (line 17))
  Using cached six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting oauthlib>=3.0.0 (from requests-oauthlib>=0.7.0->google-auth-oauthlib>=1.1.0->-r requirements.txt 
(line 6))
  Using cached oauthlib-3.3.1-py3-none-any.whl.metadata (7.9 kB)
Downloading mcp-1.12.3-py3-none-any.whl (158 kB)
Using cached pydantic-2.11.7-py3-none-any.whl (444 kB)
Using cached pydantic_core-2.33.2-cp313-cp313-macosx_11_0_arm64.whl (1.8 MB)
Using cached google_auth-2.40.3-py2.py3-none-any.whl (216 kB)
Using cached cachetools-5.5.2-py3-none-any.whl (10 kB)
Using cached rsa-4.9.1-py3-none-any.whl (34 kB)
Using cached google_auth_oauthlib-1.2.2-py3-none-any.whl (19 kB)
Using cached google_auth_httplib2-0.2.0-py2.py3-none-any.whl (9.3 kB)
Using cached requests-2.32.4-py3-none-any.whl (64 kB)
Using cached charset_normalizer-3.4.2-cp313-cp313-macosx_10_13_universal2.whl (199 kB)
Using cached idna-3.10-py3-none-any.whl (70 kB)
Using cached urllib3-2.5.0-py3-none-any.whl (129 kB)
Using cached google_ads-27.0.0-py3-none-any.whl (13.3 MB)
Using cached google_api_core-2.25.1-py3-none-any.whl (160 kB)
Using cached googleapis_common_protos-1.70.0-py3-none-any.whl (294 kB)
Using cached grpcio-1.74.0-cp313-cp313-macosx_11_0_universal2.whl (11.0 MB)
Using cached grpcio_status-1.74.0-py3-none-any.whl (14 kB)
Using cached proto_plus-1.26.1-py3-none-any.whl (50 kB)
Using cached protobuf-6.31.1-cp39-abi3-macosx_10_9_universal2.whl (425 kB)
Using cached PyYAML-6.0.2-cp313-cp313-macosx_11_0_arm64.whl (171 kB)
Using cached python_dotenv-1.1.1-py3-none-any.whl (20 kB)
Downloading matplotlib-3.10.5-cp313-cp313-macosx_11_0_arm64.whl (8.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.1/8.1 MB 184.6 kB/s eta 0:00:00
Using cached pandas-2.3.1-cp313-cp313-macosx_11_0_arm64.whl (10.7 MB)
Using cached fastapi-0.116.1-py3-none-any.whl (95 kB)
Downloading starlette-0.47.2-py3-none-any.whl (72 kB)
Using cached anyio-4.9.0-py3-none-any.whl (100 kB)
Using cached uvicorn-0.35.0-py3-none-any.whl (66 kB)
Using cached pytest-8.4.1-py3-none-any.whl (365 kB)
Using cached pluggy-1.6.0-py3-none-any.whl (20 kB)
Using cached pytest_cov-6.2.1-py3-none-any.whl (24 kB)
Using cached pytest_mock-3.14.1-py3-none-any.whl (9.9 kB)
Using cached pytest_asyncio-1.1.0-py3-none-any.whl (15 kB)
Using cached pytest_html-4.1.1-py3-none-any.whl (23 kB)
Using cached httpx-0.28.1-py3-none-any.whl (73 kB)
Using cached httpcore-1.0.9-py3-none-any.whl (78 kB)
Using cached responses-0.25.7-py3-none-any.whl (34 kB)
Using cached annotated_types-0.7.0-py3-none-any.whl (13 kB)
Using cached certifi-2025.7.14-py3-none-any.whl (162 kB)
Using cached click-8.2.1-py3-none-any.whl (102 kB)
Downloading contourpy-1.3.3-cp313-cp313-macosx_11_0_arm64.whl (274 kB)
Using cached coverage-7.10.1-cp313-cp313-macosx_11_0_arm64.whl (215 kB)
Using cached cycler-0.12.1-py3-none-any.whl (8.3 kB)
Downloading fonttools-4.59.0-cp313-cp313-macosx_10_13_universal2.whl (2.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.8/2.8 MB 121.8 kB/s eta 0:00:00
Using cached h11-0.16.0-py3-none-any.whl (37 kB)
Using cached httplib2-0.22.0-py3-none-any.whl (96 kB)
Using cached pyparsing-3.2.3-py3-none-any.whl (111 kB)
Using cached httptools-0.6.4-cp313-cp313-macosx_11_0_arm64.whl (102 kB)
Using cached httpx_sse-0.4.1-py3-none-any.whl (8.1 kB)
Using cached iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
Using cached jinja2-3.1.6-py3-none-any.whl (134 kB)
Downloading jsonschema-4.25.0-py3-none-any.whl (89 kB)
Using cached attrs-25.3.0-py3-none-any.whl (63 kB)
Using cached jsonschema_specifications-2025.4.1-py3-none-any.whl (18 kB)
Using cached kiwisolver-1.4.8-cp313-cp313-macosx_11_0_arm64.whl (65 kB)
Using cached MarkupSafe-3.0.2-cp313-cp313-macosx_11_0_arm64.whl (12 kB)
Downloading numpy-2.3.2-cp313-cp313-macosx_14_0_arm64.whl (5.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.1/5.1 MB 107.7 kB/s eta 0:00:00
Using cached packaging-25.0-py3-none-any.whl (66 kB)
Using cached pillow-11.3.0-cp313-cp313-macosx_11_0_arm64.whl (4.7 MB)
Using cached pyasn1-0.6.1-py3-none-any.whl (83 kB)
Using cached pyasn1_modules-0.4.2-py3-none-any.whl (181 kB)
Using cached pydantic_settings-2.10.1-py3-none-any.whl (45 kB)
Using cached pygments-2.19.2-py3-none-any.whl (1.2 MB)
Using cached pytest_metadata-3.1.1-py3-none-any.whl (11 kB)
Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Using cached python_multipart-0.0.20-py3-none-any.whl (24 kB)
Using cached pytz-2025.2-py2.py3-none-any.whl (509 kB)
Using cached referencing-0.36.2-py3-none-any.whl (26 kB)
Using cached requests_oauthlib-2.0.0-py2.py3-none-any.whl (24 kB)
Using cached oauthlib-3.3.1-py3-none-any.whl (160 kB)
Using cached rpds_py-0.26.0-cp313-cp313-macosx_11_0_arm64.whl (350 kB)
Using cached six-1.17.0-py2.py3-none-any.whl (11 kB)
Using cached sniffio-1.3.1-py3-none-any.whl (10 kB)
Downloading sse_starlette-3.0.2-py3-none-any.whl (11 kB)
Using cached typing_extensions-4.14.1-py3-none-any.whl (43 kB)
Using cached typing_inspection-0.4.1-py3-none-any.whl (14 kB)
Using cached tzdata-2025.2-py2.py3-none-any.whl (347 kB)
Using cached uvloop-0.21.0-cp313-cp313-macosx_10_13_universal2.whl (1.5 MB)
Using cached watchfiles-1.1.0-cp313-cp313-macosx_11_0_arm64.whl (393 kB)
Using cached websockets-15.0.1-cp313-cp313-macosx_11_0_arm64.whl (173 kB)
Installing collected packages: pytz, websockets, uvloop, urllib3, tzdata, typing-extensions, sniffio, six, r
pds-py, PyYAML, python-multipart, python-dotenv, pyparsing, pygments, pyasn1, protobuf, pluggy, pillow, pack
aging, oauthlib, numpy, MarkupSafe, kiwisolver, iniconfig, idna, httpx-sse, httptools, h11, grpcio, fonttool
s, cycler, coverage, click, charset_normalizer, certifi, cachetools, attrs, annotated-types, uvicorn, typing
-inspection, rsa, requests, referencing, python-dateutil, pytest, pydantic-core, pyasn1-modules, proto-plus,
 jinja2, httplib2, httpcore, googleapis-common-protos, contourpy, anyio, watchfiles, starlette, sse-starlett
e, responses, requests-oauthlib, pytest-mock, pytest-metadata, pytest-cov, pytest-asyncio, pydantic, pandas,
 matplotlib, jsonschema-specifications, httpx, grpcio-status, google-auth, pytest-html, pydantic-settings, j
sonschema, google-auth-oauthlib, google-auth-httplib2, google-api-core, fastapi, mcp, google-ads
Successfully installed MarkupSafe-3.0.2 PyYAML-6.0.2 annotated-types-0.7.0 anyio-4.9.0 attrs-25.3.0 cachetoo
ls-5.5.2 certifi-2025.7.14 charset_normalizer-3.4.2 click-8.2.1 contourpy-1.3.3 coverage-7.10.1 cycler-0.12.
1 fastapi-0.116.1 fonttools-4.59.0 google-ads-27.0.0 google-api-core-2.25.1 google-auth-2.40.3 google-auth-h
ttplib2-0.2.0 google-auth-oauthlib-1.2.2 googleapis-common-protos-1.70.0 grpcio-1.74.0 grpcio-status-1.74.0
h11-0.16.0 httpcore-1.0.9 httplib2-0.22.0 httptools-0.6.4 httpx-0.28.1 httpx-sse-0.4.1 idna-3.10 iniconfig-2
.1.0 jinja2-3.1.6 jsonschema-4.25.0 jsonschema-specifications-2025.4.1 kiwisolver-1.4.8 matplotlib-3.10.5 mc
p-1.12.3 numpy-2.3.2 oauthlib-3.3.1 packaging-25.0 pandas-2.3.1 pillow-11.3.0 pluggy-1.6.0 proto-plus-1.26.1
 protobuf-6.31.1 pyasn1-0.6.1 pyasn1-modules-0.4.2 pydantic-2.11.7 pydantic-core-2.33.2 pydantic-settings-2.
10.1 pygments-2.19.2 pyparsing-3.2.3 pytest-8.4.1 pytest-asyncio-1.1.0 pytest-cov-6.2.1 pytest-html-4.1.1 py
test-metadata-3.1.1 pytest-mock-3.14.1 python-dateutil-2.9.0.post0 python-dotenv-1.1.1 python-multipart-0.0.
20 pytz-2025.2 referencing-0.36.2 requests-2.32.4 requests-oauthlib-2.0.0 responses-0.25.7 rpds-py-0.26.0 rs
a-4.9.1 six-1.17.0 sniffio-1.3.1 sse-starlette-3.0.2 starlette-0.47.2 typing-extensions-4.14.1 typing-inspec
tion-0.4.1 tzdata-2025.2 urllib3-2.5.0 uvicorn-0.35.0 uvloop-0.21.0 watchfiles-1.1.0 websockets-15.0.1

[notice] A new release of pip is available: 25.1.1 -> 25.2
[notice] To update, run: pip install --upgrade pip

```

---

Now let me run the existing API endpoint tests to see their current status:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v
```

```
(venv) bernardojrodriguez@Mac mcp-google-ads % source venv/bin/activate && python -m pytest tests/api/test_a
pi_endpoints.py -v                             source venv/bin/activate && python -m pytest tests/api/test_a
pi_endpoints.py -v
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 0 items / 1 error                                                                                

================================================== ERRORS ==================================================
_____________________________ ERROR collecting tests/api/test_api_endpoints.py _____________________________
venv/lib/python3.13/site-packages/_pytest/python.py:498: in importtestmodule
    mod = import_path(
venv/lib/python3.13/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/_
_init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
venv/lib/python3.13/site-packages/_pytest/assertion/rewrite.py:186: in exec_module
    exec(co, module.__dict__)
tests/api/test_api_endpoints.py:11: in <module>
    import app
E     File "/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py", line 376
E       async def validate_campaign(campaign_id: str = Query(..., description="Campaign ID to validate"), re
quest: Request):
E                                                                                                         ^^
^^^^^^^^^^^^^^
E   SyntaxError: parameter without a default follows parameter with a default
========================================= short test summary info ==========================================
ERROR tests/api/test_api_endpoints.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
============================================= 1 error in 0.45s =============================================
(venv) bernardojrodriguez@Mac mcp-google-ads %
```

---

There's a syntax error in the app.py file. Let me fix it:


---

Read file: app.py

---

I can see the issue. The `request: Request` parameter should have a default value. Let me fix this:


---

<details><summary>Edit file: app.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -374,5 +374,5 @@
  
  @app.post("/api/validate-campaign")
- async def validate_campaign(campaign_id: str = Query(..., description="Campaign ID to validate"), request: Request):
+ async def validate_campaign(campaign_id: str = Query(..., description="Campaign ID to validate"), request: Request = None):
      """Validate campaign ID with comprehensive error handling"""
      try:
```

</details>

---

Now let me also fix the similar issue in the keyword-ideas endpoint:


---

The model made no changes to the file.

---

The keyword-ideas endpoint is already correct. Let me check if there are any other similar issues and then run the tests:


---

<details>
            <summary>Grep search for "request: Request\)" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L310 | `async def get_api_status(request: Request):` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L331 | `async def validate_customer(customer_id: str, request: Request):` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L432 | `async def test_error_handling(error_type: str = Query(..., description="Type of error to test"), request: Request):` |

</details>

---

Let me fix these remaining issues:


---

<details><summary>Edit file: app.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -308,5 +308,5 @@
  
  @app.get("/api/status")
- async def get_api_status(request: Request):
+ async def get_api_status(request: Request = None):
      """Get comprehensive API status with error handling"""
      try:
```

</details>

---

<details><summary>Edit file: app.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -329,5 +329,5 @@
  
  @app.get("/api/validate-customer/{customer_id}")
- async def validate_customer(customer_id: str, request: Request):
+ async def validate_customer(customer_id: str, request: Request = None):
      """Validate customer ID with comprehensive error handling"""
      try:
```

</details>

---

<details><summary>Edit file: app.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -430,5 +430,5 @@
  
  @app.get("/api/error-test")
- async def test_error_handling(error_type: str = Query(..., description="Type of error to test"), request: Request):
+ async def test_error_handling(error_type: str = Query(..., description="Type of error to test"), request: Request = None):
      """Test endpoint for error handling system"""
      try:
```

</details>

---

Now let me run the tests again:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v
```

```
(venv) bernardojrodriguez@Mac mcp-google-ads % source venv/bin/activate && python -m pytest tests/api/test_a
pi_endpoints.py -v                             source venv/bin/activate && python -m pytest tests/api/test_a
pi_endpoints.py -v
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 0 items / 1 error                                                                                

================================================== ERRORS ==================================================
_____________________________ ERROR collecting tests/api/test_api_endpoints.py _____________________________
ImportError while importing test module '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/t
est_api_endpoints.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/_
_init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/api/test_api_endpoints.py:11: in <module>
    import app
app.py:28: in <module>
    from google.ads.googleads.util import ResourceName
E   ImportError: cannot import name 'ResourceName' from 'google.ads.googleads.util' (/Users/bernardojrodrigu
ez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/google/ads/googleads/util.py)
========================================= short test summary info ==========================================
ERROR tests/api/test_api_endpoints.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
============================================= 1 error in 2.38s =============================================
(venv) bernardojrodriguez@Mac mcp-google-ads %
```

---

There's an import error. Let me check what's available in the google.ads.googleads.util module and fix the import:


---

```bash
source venv/bin/activate && python -c "from google.ads.googleads import util; print(dir(util))"
```

```
(venv) bernardojrodriguez@Mac mcp-google-ads % source venv/bin/activate && python -c "from google.ads.google
ads import util; print(dir(util))"             source venv/bin/activate && python -c "from google.ads.google
ads import util; print(dir(util))"
['ProtobufMessageType', '_RE_FIND_CHARS_TO_UPPERCASE', '__builtins__', '__cached__', '__doc__', '__file__', 
'__loader__', '__name__', '__package__', '__spec__', 'convert_proto_plus_to_protobuf', 'convert_protobuf_to_
proto_plus', 'convert_snake_case_to_upper_case', 'convert_upper_case_to_snake_case', 'functools', 'get_neste
d_attr', 'proto', 'proto_copy_from', 're', 'set_nested_message_field']
(venv) bernardojrodriguez@Mac mcp-google-ads %
```

---

The `ResourceName` import doesn't exist. Let me remove it from the app.py file:


---

<details><summary>Edit file: app.py</summary>

undefined

**Chunk 1**
Lines added: undefined, lines removed: 1

```diff
@@ -26,5 +26,4 @@
  from google.ads.googleads.client import GoogleAdsClient
  from google.ads.googleads.errors import GoogleAdsException
- from google.ads.googleads.util import ResourceName
  
  # Import centralized error handling
```

</details>

---

Now let me run the tests again:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v
```

```
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 27 items                                                                                         

tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_success ERROR          [  3%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_customer_id ERROR [  7
%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_invalid_customer_id ERROR [ 11
%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_keywords ERROR [ 14%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_google_ads_error ERROR [ 18%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_success ERROR    [ 22%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_missing_required_fields 
ERROR [ 25%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_invalid_budget ERROR [ 2
9%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_google_ads_error ERROR [
 33%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_success ERROR     [ 37%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_missing_required_fields E
RROR [ 40%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_invalid_campaign_id ERROR
 [ 44%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_google_ads_error ERROR [ 
48%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check ERROR                   [ 51%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check ERROR     [ 55%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status ERROR                     [ 59%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_success ERROR       [ 62%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_invalid_id ERROR    [ 66%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_success ERROR       [ 70%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_invalid_id ERROR    [ 74%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_error_test_endpoint ERROR                   [ 77%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_404_error ERROR                             [ 81%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_validation_error ERROR                      [ 85%]
tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_response ERROR            [ 88%]
tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_error_response ERROR      [ 92%]
tests/api/test_api_endpoints.py::TestResponseFormat::test_success_response_format ERROR              [ 96%]
tests/api/test_api_endpoints.py::TestResponseFormat::test_error_response_format ERROR                [100%]

================================================== ERRORS ==================================================
__________________ ERROR at setup of TestKeywordIdeasEndpoint.test_keyword_ideas_success ___________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 17
      @pytest.mark.api
      def test_keyword_ideas_success(self, test_client: TestClient, mock_google_ads_client, sample_customer_
id: str):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:17
____________ ERROR at setup of TestKeywordIdeasEndpoint.test_keyword_ideas_missing_customer_id _____________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 67
      @pytest.mark.api
      def test_keyword_ideas_missing_customer_id(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:67
____________ ERROR at setup of TestKeywordIdeasEndpoint.test_keyword_ideas_invalid_customer_id _____________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 85
      @pytest.mark.api
      def test_keyword_ideas_invalid_customer_id(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:85
______________ ERROR at setup of TestKeywordIdeasEndpoint.test_keyword_ideas_missing_keywords ______________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 103
      @pytest.mark.api
      def test_keyword_ideas_missing_keywords(self, test_client: TestClient, sample_customer_id: str):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:103
______________ ERROR at setup of TestKeywordIdeasEndpoint.test_keyword_ideas_google_ads_error ______________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 121
      @pytest.mark.api
      @patch('app.get_google_ads_client')
      def test_keyword_ideas_google_ads_error(self, mock_get_client, test_client: TestClient, sample_custome
r_id: str):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:121
_______________ ERROR at setup of TestCampaignCreationEndpoint.test_create_campaign_success ________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 150
      @pytest.mark.api
      def test_create_campaign_success(self, test_client: TestClient, sample_campaign_data: Dict[str, Any]):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:150
_______ ERROR at setup of TestCampaignCreationEndpoint.test_create_campaign_missing_required_fields ________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 185
      @pytest.mark.api
      def test_create_campaign_missing_required_fields(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:185
____________ ERROR at setup of TestCampaignCreationEndpoint.test_create_campaign_invalid_budget ____________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 201
      @pytest.mark.api
      def test_create_campaign_invalid_budget(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:201
___________ ERROR at setup of TestCampaignCreationEndpoint.test_create_campaign_google_ads_error ___________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 218
      @pytest.mark.api
      @patch('app.get_google_ads_client')
      def test_create_campaign_google_ads_error(self, mock_get_client, test_client: TestClient, sample_campa
ign_data: Dict[str, Any]):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:218
________________ ERROR at setup of TestAdGroupCreationEndpoint.test_create_ad_group_success ________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 241
      @pytest.mark.api
      def test_create_ad_group_success(self, test_client: TestClient, sample_ad_group_data: Dict[str, Any]):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:241
________ ERROR at setup of TestAdGroupCreationEndpoint.test_create_ad_group_missing_required_fields ________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 277
      @pytest.mark.api
      def test_create_ad_group_missing_required_fields(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:277
__________ ERROR at setup of TestAdGroupCreationEndpoint.test_create_ad_group_invalid_campaign_id __________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 293
      @pytest.mark.api
      def test_create_ad_group_invalid_campaign_id(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:293
___________ ERROR at setup of TestAdGroupCreationEndpoint.test_create_ad_group_google_ads_error ____________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 311
      @pytest.mark.api
      @patch('app.get_google_ads_client')
      def test_create_ad_group_google_ads_error(self, mock_get_client, test_client: TestClient, sample_ad_gr
oup_data: Dict[str, Any]):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:311
_______________________ ERROR at setup of TestHealthCheckEndpoints.test_health_check _______________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 334
      @pytest.mark.api
      def test_health_check(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:334
________________ ERROR at setup of TestHealthCheckEndpoints.test_keyword_ideas_health_check ________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 344
      @pytest.mark.api
      def test_keyword_ideas_health_check(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:344
________________________ ERROR at setup of TestHealthCheckEndpoints.test_api_status ________________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 353
      @pytest.mark.api
      def test_api_status(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:353
_________________ ERROR at setup of TestValidationEndpoints.test_validate_customer_success _________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 368
      @pytest.mark.api
      def test_validate_customer_success(self, test_client: TestClient, sample_customer_id: str):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:368
_______________ ERROR at setup of TestValidationEndpoints.test_validate_customer_invalid_id ________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 388
      @pytest.mark.api
      def test_validate_customer_invalid_id(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:388
_________________ ERROR at setup of TestValidationEndpoints.test_validate_campaign_success _________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 397
      @pytest.mark.api
      def test_validate_campaign_success(self, test_client: TestClient, sample_campaign_id: str):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:397
_______________ ERROR at setup of TestValidationEndpoints.test_validate_campaign_invalid_id ________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 421
      @pytest.mark.api
      def test_validate_campaign_invalid_id(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:421
_______________________ ERROR at setup of TestErrorHandling.test_error_test_endpoint _______________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 437
      @pytest.mark.api
      def test_error_test_endpoint(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:437
____________________________ ERROR at setup of TestErrorHandling.test_404_error ____________________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 447
      @pytest.mark.api
      def test_404_error(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:447
________________________ ERROR at setup of TestErrorHandling.test_validation_error _________________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 456
      @pytest.mark.api
      def test_validation_error(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:456
___________________ ERROR at setup of TestRequestIdTracking.test_request_id_in_response ____________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 477
      @pytest.mark.api
      def test_request_id_in_response(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:477
________________ ERROR at setup of TestRequestIdTracking.test_request_id_in_error_response _________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 486
      @pytest.mark.api
      def test_request_id_in_error_response(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:486
____________________ ERROR at setup of TestResponseFormat.test_success_response_format _____________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 499
      @pytest.mark.api
      def test_success_response_format(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:499
_____________________ ERROR at setup of TestResponseFormat.test_error_response_format ______________________
file /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py, line 511
      @pytest.mark.api
      def test_error_response_format(self, test_client: TestClient):
E       fixture 'test_client' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_s
coped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd
, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, cov, doctest_namespace, event_loop_pol
icy, extra, extras, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, include_meta
data_in_junit_xml, metadata, mocker, module_mocker, monkeypatch, no_cover, package_mocker, pytestconfig, rec
ord_property, record_testsuite_property, record_xml_attribute, recwarn, session_mocker, tmp_path, tmp_path_f
actory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_f
actory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:511
============================================= warnings summary =============================================
app.py:664
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:664: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('customer_id')

app.py:677
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:677: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_name')

app.py:691
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:691: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('budget_amount')

app.py:700
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:700: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('geo_targets')

venv/lib/python3.13/site-packages/pydantic/fields.py:1062
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/pydantic/fields.
py:1062: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead.
 Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydant
ic.dev/2.11/migration/
    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)

app.py:838
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:838: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_id')

app.py:864
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:864: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('ad_group_name')

app.py:886
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:886: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('keywords')

app.py:929
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:929: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('max_cpc')

app.py:945
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:945: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('status')

tests/api/test_api_endpoints.py:17
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:17: PytestUnknownM
arkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning -
 for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:67
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:67: PytestUnknownM
arkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning -
 for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:85
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:85: PytestUnknownM
arkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning -
 for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:103
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:103: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:121
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:121: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:150
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:150: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:185
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:185: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:201
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:201: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:218
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:218: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:241
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:241: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:277
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:277: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:293
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:293: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:311
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:311: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:334
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:334: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:344
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:344: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:353
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:353: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:368
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:368: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:388
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:388: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:397
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:397: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:421
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:421: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:437
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:437: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:447
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:447: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:456
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:456: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:477
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:477: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:486
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:486: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:499
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:499: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

tests/api/test_api_endpoints.py:511
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py:511: PytestUnknown
MarkWarning: Unknown pytest.mark.api - is this a typo?  You can register custom marks to avoid this warning
- for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.api

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
========================================= short test summary info ==========================================
ERROR tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_success
ERROR tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_customer_id
ERROR tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_invalid_customer_id
ERROR tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_keywords
ERROR tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_google_ads_error
ERROR tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_success
ERROR tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_missing_required_f
ields
ERROR tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_invalid_budget
ERROR tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_google_ads_error
ERROR tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_success
ERROR tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_missing_required_fi
elds
ERROR tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_invalid_campaign_id
ERROR tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_google_ads_error
ERROR tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
ERROR tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check
ERROR tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status
ERROR tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_success
ERROR tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_invalid_id
ERROR tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_success
ERROR tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_invalid_id
ERROR tests/api/test_api_endpoints.py::TestErrorHandling::test_error_test_endpoint
ERROR tests/api/test_api_endpoints.py::TestErrorHandling::test_404_error
ERROR tests/api/test_api_endpoints.py::TestErrorHandling::test_validation_error
ERROR tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_response
ERROR tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_error_response
ERROR tests/api/test_api_endpoints.py::TestResponseFormat::test_success_response_format
ERROR tests/api/test_api_endpoints.py::TestResponseFormat::test_error_response_format
===================================== 37 warnings, 27 errors in 0.56s ======================================

```

---

The tests are missing the required fixtures. Let me check the conftest.py file to see what fixtures are available:


---

Read file: tests/conftest.py

---

The conftest.py file is empty. I need to create the missing fixtures. Let me create a comprehensive conftest.py file with all the required fixtures:


---

<details><summary>Edit file: tests/conftest.py</summary>

I'm creating a comprehensive conftest.py file with all the required fixtures for the API endpoint tests

**Chunk 1**
Lines added: 228, lines removed: 1

```diff
@@ -1,1 +1,228 @@
-  
+ """
+ Pytest configuration and fixtures for the Google Ads API tests.
+ """
+ import pytest
+ from fastapi.testclient import TestClient
+ from unittest.mock import Mock, patch
+ from typing import Dict, Any
+ import os
+ import tempfile
+ import json
+ 
+ # Import the application
+ import app
+ 
+ 
+ @pytest.fixture
+ def test_client():
+     """Create a test client for the FastAPI application."""
+     return TestClient(app.app)
+ 
+ 
+ @pytest.fixture
+ def sample_customer_id():
+     """Provide a sample customer ID for testing."""
+     return "1234567890"
+ 
+ 
+ @pytest.fixture
+ def sample_campaign_id():
+     """Provide a sample campaign ID for testing."""
+     return "customers/1234567890/campaigns/5678"
+ 
+ 
+ @pytest.fixture
+ def sample_campaign_data():
+     """Provide sample campaign data for testing."""
+     return {
+         "customer_id": "1234567890",
+         "campaign_name": "Test Campaign",
+         "budget_amount": 50.0,
+         "geo_targets": [2840],
+         "status": "PAUSED"
+     }
+ 
+ 
+ @pytest.fixture
+ def sample_ad_group_data():
+     """Provide sample ad group data for testing."""
+     return {
+         "campaign_id": "customers/1234567890/campaigns/5678",
+         "ad_group_name": "Test Ad Group",
+         "keywords": ["test keyword", "sample keyword"],
+         "max_cpc": 1.50,
+         "status": "PAUSED"
+     }
+ 
+ 
+ @pytest.fixture
+ def mock_google_ads_client():
+     """Mock Google Ads client for testing."""
+     with patch('app.GoogleAdsClient') as mock_client:
+         mock_instance = Mock()
+         mock_service = Mock()
+         mock_instance.get_service.return_value = mock_service
+         mock_client.load_from_storage.return_value = mock_instance
+         yield mock_instance
+ 
+ 
+ @pytest.fixture
+ def mock_keyword_ideas_service():
+     """Mock KeywordIdeasService for testing."""
+     with patch('app.KeywordIdeasService') as mock_service_class:
+         mock_service = Mock()
+         mock_service.make_keyword_ideas_request.return_value = {
+             "keywords": [
+                 {
+                     "text": "digital marketing agency",
+                     "avg_monthly_searches": 1000,
+                     "competition": "HIGH",
+                     "bid_low_micros": 1500000,
+                     "bid_high_micros": 3000000
+                 }
+             ],
+             "status": "success"
+         }
+         mock_service_class.return_value = mock_service
+         yield mock_service
+ 
+ 
+ @pytest.fixture
+ def mock_campaign_service():
+     """Mock campaign service for testing."""
+     with patch('app.campaign_service') as mock_service:
+         mock_campaign = Mock()
+         mock_campaign.name = "Test Campaign"
+         mock_campaign.status.name = "PAUSED"
+         mock_campaign.campaign_budget.amount_micros = 50000000  # $50
+         mock_service.get_campaign.return_value = mock_campaign
+         yield mock_service
+ 
+ 
+ @pytest.fixture
+ def mock_ad_group_service():
+     """Mock ad group service for testing."""
+     with patch('app.ad_group_service') as mock_service:
+         mock_ad_group = Mock()
+         mock_ad_group.name = "Test Ad Group"
+         mock_ad_group.status.name = "PAUSED"
+         mock_service.get_ad_group.return_value = mock_ad_group
+         yield mock_service
+ 
+ 
+ @pytest.fixture
+ def temp_google_ads_config():
+     """Create a temporary Google Ads configuration file."""
+     config_content = {
+         "developer_token": "test_token",
+         "client_id": "test_client_id",
+         "client_secret": "test_client_secret",
+         "refresh_token": "test_refresh_token",
+         "login_customer_id": "1234567890"
+     }
+     
+     with tempfile.NamedTemporaryFile(mode='w', suffix='.yaml', delete=False) as f:
+         import yaml
+         yaml.dump(config_content, f)
+         temp_file = f.name
+     
+     yield temp_file
+     
+     # Cleanup
+     try:
+         os.unlink(temp_file)
+     except OSError:
+         pass
+ 
+ 
+ @pytest.fixture
+ def mock_google_ads_exception():
+     """Mock Google Ads API exception for testing error handling."""
+     from google.ads.googleads.errors import GoogleAdsException
+     
+     class MockGoogleAdsException(GoogleAdsException):
+         def __init__(self, message="Test Google Ads API error"):
+             self.message = message
+             self.error_code = "TEST_ERROR"
+     
+     return MockGoogleAdsException()
+ 
+ 
+ @pytest.fixture
+ def sample_keyword_ideas_response():
+     """Provide sample keyword ideas response for testing."""
+     return {
+         "keywords": [
+             {
+                 "text": "digital marketing agency",
+                 "avg_monthly_searches": 1000,
+                 "competition": "HIGH",
+                 "bid_low_micros": 1500000,
+                 "bid_high_micros": 3000000
+             },
+             {
+                 "text": "seo services",
+                 "avg_monthly_searches": 800,
+                 "competition": "MEDIUM",
+                 "bid_low_micros": 1200000,
+                 "bid_high_micros": 2500000
+             }
+         ],
+         "status": "success"
+     }
+ 
+ 
+ @pytest.fixture
+ def sample_campaign_creation_response():
+     """Provide sample campaign creation response for testing."""
+     return {
+         "success": True,
+         "campaign_id": "customers/1234567890/campaigns/5678",
+         "message": "Campaign created successfully",
+         "request_id": "test-request-id"
+     }
+ 
+ 
+ @pytest.fixture
+ def sample_ad_group_creation_response():
+     """Provide sample ad group creation response for testing."""
+     return {
+         "success": True,
+         "ad_group_id": "customers/1234567890/adGroups/1234",
+         "message": "Ad group created successfully",
+         "keywords_added": 2,
+         "keywords_failed": 0,
+         "failed_keywords": [],
+         "total_keywords": 2,
+         "request_id": "test-request-id"
+     }
+ 
+ 
+ @pytest.fixture
+ def mock_request_id():
+     """Mock request ID for testing."""
+     return "test-request-id-12345"
+ 
+ 
+ @pytest.fixture
+ def mock_logger():
+     """Mock logger for testing."""
+     with patch('app.logger') as mock_logger:
+         yield mock_logger
+ 
+ 
+ # Pytest configuration
+ def pytest_configure(config):
+     """Configure pytest with custom markers."""
+     config.addinivalue_line(
+         "markers", "api: mark test as an API endpoint test"
+     )
+     config.addinivalue_line(
+         "markers", "unit: mark test as a unit test"
+     )
+     config.addinivalue_line(
+         "markers", "integration: mark test as an integration test"
+     )
+     config.addinivalue_line(
+         "markers", "slow: mark test as slow running"
+     ) 
```

</details>

---

Now let me run the tests again to see if they work with the fixtures:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check -v
```

```
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item                                                                                           

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check PASSED                  [100%]

============================================= warnings summary =============================================
app.py:664
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:664: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('customer_id')

app.py:677
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:677: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_name')

app.py:691
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:691: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('budget_amount')

app.py:700
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:700: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('geo_targets')

venv/lib/python3.13/site-packages/pydantic/fields.py:1062
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/pydantic/fields.
py:1062: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead.
 Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydant
ic.dev/2.11/migration/
    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)

app.py:838
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:838: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_id')

app.py:864
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:864: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('ad_group_name')

app.py:886
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:886: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('keywords')

app.py:929
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:929: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('max_cpc')

app.py:945
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:945: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('status')

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/logging_config.py:34: DeprecationWarning: datetime
.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects t
o represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:274: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
====================================== 1 passed, 19 warnings in 0.04s ======================================

```

---

Great! The test is now passing. Let me run a few more tests to see the current status:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py::TestHealthCheckEndpoints -v
```

```
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 3 items                                                                                          

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check PASSED                  [ 33%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check PASSED    [ 66%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status PASSED                    [100%]

============================================= warnings summary =============================================
app.py:664
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:664: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('customer_id')

app.py:677
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:677: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_name')

app.py:691
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:691: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('budget_amount')

app.py:700
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:700: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('geo_targets')

venv/lib/python3.13/site-packages/pydantic/fields.py:1062
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/pydantic/fields.
py:1062: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead.
 Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydant
ic.dev/2.11/migration/
    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)

app.py:838
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:838: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_id')

app.py:864
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:864: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('ad_group_name')

app.py:886
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:886: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('keywords')

app.py:929
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:929: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('max_cpc')

app.py:945
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:945: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('status')

tests/api/test_api_endpoints.py: 27 warnings
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/logging_config.py:34: DeprecationWarning: datetime
.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects t
o represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:274: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:293: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:314: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
====================================== 3 passed, 40 warnings in 0.02s ======================================

```

---

Excellent! The health check tests are passing. Now let me run all the tests to see the overall status and identify what needs to be improved:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v --tb=short
```

```
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 27 items                                                                                         

tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_success FAILED         [  3%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_customer_id FAILED [

7%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_invalid_customer_id FAILED [ 1
1%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_keywords FAILED [ 14%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_google_ads_error FAILED [ 18%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_success FAILED   [ 22%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_missing_required_fields 
PASSED [ 25%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_invalid_budget PASSED [ 
29%]
tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_google_ads_error FAILED 
[ 33%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_success FAILED    [ 37%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_missing_required_fields P
ASSED [ 40%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_invalid_campaign_id FAILE
D [ 44%]
tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_google_ads_error FAILED [
 48%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check PASSED                  [ 51%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check PASSED    [ 55%]
tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status PASSED                    [ 59%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_success FAILED      [ 62%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_invalid_id PASSED   [ 66%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_success FAILED      [ 70%]
tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_invalid_id FAILED   [ 74%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_error_test_endpoint FAILED                  [ 77%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_404_error PASSED                            [ 81%]
tests/api/test_api_endpoints.py::TestErrorHandling::test_validation_error PASSED                     [ 85%]
tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_response PASSED           [ 88%]
tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_error_response PASSED     [ 92%]
tests/api/test_api_endpoints.py::TestResponseFormat::test_success_response_format PASSED             [ 96%]
tests/api/test_api_endpoints.py::TestResponseFormat::test_error_response_format PASSED               [100%]

================================================= FAILURES =================================================
___________________________ TestKeywordIdeasEndpoint.test_keyword_ideas_success ____________________________
tests/api/test_api_endpoints.py:43: in test_keyword_ideas_success
    with patch('app.get_google_ads_client') as mock_get_client:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
_____________________ TestKeywordIdeasEndpoint.test_keyword_ideas_missing_customer_id ______________________
tests/api/test_api_endpoints.py:80: in test_keyword_ideas_missing_customer_id
    assert response.status_code == 400
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:47.881104", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "65d45bf5
-d421-4e19-ab30-77162fbedf61", "query_params": {"q": "digital marketing", "geo": "2840", "lang": "1003", "li
mit": "5"}, "client_ip": "testclient", "user_agent": "testclient", "endpoint": "/keyword-ideas", "method": "
GET"}
{"timestamp": "2025-08-03T02:00:47.882830", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "65d45bf5
-d421-4e19-ab30-77162fbedf61", "duration": 0.002003192901611328, "endpoint": "/keyword-ideas", "method": "GE
T"}
{"timestamp": "2025-08-03T02:00:47.883567", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GE
T http://testserver/keyword-ideas?q=digital+marketing&geo=2840&lang=1003&limit=5 \"HTTP/1.1 422 Unprocessabl
e Entity\"", "module": "_client", "function": "_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/keyword-ideas?q=digital+marketing&geo=284
0&lang=1003&limit=5 "HTTP/1.1 422 Unprocessable Entity"
_____________________ TestKeywordIdeasEndpoint.test_keyword_ideas_invalid_customer_id ______________________
tests/api/test_api_endpoints.py:99: in test_keyword_ideas_invalid_customer_id
    assert response.status_code == 400
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:47.891323", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "959821cf
-4ee8-4ed4-8a0c-ff877394d8fc", "query_params": {"customer_id": "invalid", "q": "digital marketing", "geo": "
2840", "lang": "1003", "limit": "5"}, "client_ip": "testclient", "user_agent": "testclient", "endpoint": "/k
eyword-ideas", "method": "GET"}
{"timestamp": "2025-08-03T02:00:47.892085", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "959821cf
-4ee8-4ed4-8a0c-ff877394d8fc", "duration": 0.0008370876312255859, "endpoint": "/keyword-ideas", "method": "G
ET"}
{"timestamp": "2025-08-03T02:00:47.892668", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GE
T http://testserver/keyword-ideas?customer_id=invalid&q=digital+marketing&geo=2840&lang=1003&limit=5 \"HTTP/
1.1 422 Unprocessable Entity\"", "module": "_client", "function": "_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/keyword-ideas?customer_id=invalid&q=digit
al+marketing&geo=2840&lang=1003&limit=5 "HTTP/1.1 422 Unprocessable Entity"
_______________________ TestKeywordIdeasEndpoint.test_keyword_ideas_missing_keywords _______________________
tests/api/test_api_endpoints.py:116: in test_keyword_ideas_missing_keywords
    assert response.status_code == 400
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:47.899275", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "958c2dcd
-5293-417d-933c-7358c2ce47c4", "query_params": {"customer_id": "1234567890", "geo": "2840", "lang": "1003",
"limit": "5"}, "client_ip": "testclient", "user_agent": "testclient", "endpoint": "/keyword-ideas", "method"
: "GET"}
{"timestamp": "2025-08-03T02:00:47.899728", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "958c2dcd
-5293-417d-933c-7358c2ce47c4", "duration": 0.0004730224609375, "endpoint": "/keyword-ideas", "method": "GET"
}
{"timestamp": "2025-08-03T02:00:47.900292", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GE
T http://testserver/keyword-ideas?customer_id=1234567890&geo=2840&lang=1003&limit=5 \"HTTP/1.1 422 Unprocess
able Entity\"", "module": "_client", "function": "_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/keyword-ideas?customer_id=1234567890&geo=
2840&lang=1003&limit=5 "HTTP/1.1 422 Unprocessable Entity"
_______________________ TestKeywordIdeasEndpoint.test_keyword_ideas_google_ads_error _______________________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
________________________ TestCampaignCreationEndpoint.test_create_campaign_success _________________________
tests/api/test_api_endpoints.py:153: in test_create_campaign_success
    with patch('app.get_google_ads_client') as mock_get_client:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
____________________ TestCampaignCreationEndpoint.test_create_campaign_google_ads_error ____________________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
_________________________ TestAdGroupCreationEndpoint.test_create_ad_group_success _________________________
tests/api/test_api_endpoints.py:244: in test_create_ad_group_success
    with patch('app.get_google_ads_client') as mock_get_client:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
___________________ TestAdGroupCreationEndpoint.test_create_ad_group_invalid_campaign_id ___________________
tests/api/test_api_endpoints.py:306: in test_create_ad_group_invalid_campaign_id
    assert response.status_code == 400
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:48.093987", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "1e64685b
-6dc3-4c56-becb-fdb8e8a79474", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "e
ndpoint": "/create-ad-group", "method": "POST"}
{"timestamp": "2025-08-03T02:00:48.095293", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "1e64685b
-6dc3-4c56-becb-fdb8e8a79474", "duration": 0.0013530254364013672, "endpoint": "/create-ad-group", "method":
"POST"}
{"timestamp": "2025-08-03T02:00:48.096839", "level": "INFO", "logger": "httpx", "message": "HTTP Request: PO
ST http://testserver/create-ad-group \"HTTP/1.1 422 Unprocessable Entity\"", "module": "_client", "function"
: "_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/create-ad-group "HTTP/1.1 422 Unprocessa
ble Entity"
____________________ TestAdGroupCreationEndpoint.test_create_ad_group_google_ads_error _____________________
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.
py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
__________________________ TestValidationEndpoints.test_validate_customer_success __________________________
tests/api/test_api_endpoints.py:371: in test_validate_customer_success
    with patch('app.get_google_ads_client') as mock_get_client:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
__________________________ TestValidationEndpoints.test_validate_campaign_success __________________________
tests/api/test_api_endpoints.py:400: in test_validate_campaign_success
    with patch('app.get_google_ads_client') as mock_get_client:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mo
ck.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> doe
s not have the attribute 'get_google_ads_client'
________________________ TestValidationEndpoints.test_validate_campaign_invalid_id _________________________
tests/api/test_api_endpoints.py:429: in test_validate_campaign_invalid_id
    assert response.status_code == 400
E   assert 422 == 400
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:48.252037", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "e45c0b64
-e0c6-44b5-9dcb-2a30954f0b9b", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "e
ndpoint": "/api/validate-campaign", "method": "POST"}
{"timestamp": "2025-08-03T02:00:48.252436", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "e45c0b64
-e0c6-44b5-9dcb-2a30954f0b9b", "duration": 0.0004439353942871094, "endpoint": "/api/validate-campaign", "met
hod": "POST"}
{"timestamp": "2025-08-03T02:00:48.253279", "level": "INFO", "logger": "httpx", "message": "HTTP Request: PO
ST http://testserver/api/validate-campaign \"HTTP/1.1 422 Unprocessable Entity\"", "module": "_client", "fun
ction": "_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: POST http://testserver/api/validate-campaign "HTTP/1.1 422 Unpr
ocessable Entity"
________________________________ TestErrorHandling.test_error_test_endpoint ________________________________
tests/api/test_api_endpoints.py:442: in test_error_test_endpoint
    assert response.status_code == 200
E   assert 422 == 200
E    +  where 422 = <Response [422 Unprocessable Entity]>.status_code
------------------------------------------- Captured stdout call -------------------------------------------
{"timestamp": "2025-08-03T02:00:48.263086", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 started", "module": "logging_config", "function": "log_request_start", "line": 163, "request_id": "4de8d9ec
-a0e1-4bae-b5c2-ba4ef3213709", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "e
ndpoint": "/api/error-test", "method": "GET"}
{"timestamp": "2025-08-03T02:00:48.264978", "level": "INFO", "logger": "google_ads_mcp", "message": "Request
 completed", "module": "logging_config", "function": "log_request_end", "line": 176, "request_id": "4de8d9ec
-a0e1-4bae-b5c2-ba4ef3213709", "duration": 0.004914999008178711, "endpoint": "/api/error-test", "method": "G
ET"}
{"timestamp": "2025-08-03T02:00:48.266746", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GE
T http://testserver/api/error-test \"HTTP/1.1 422 Unprocessable Entity\"", "module": "_client", "function":
"_send_single_request", "line": 1025}
-------------------------------------------- Captured log call ---------------------------------------------
INFO     google_ads_mcp:logging_config.py:163 Request started
INFO     google_ads_mcp:logging_config.py:176 Request completed
INFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/api/error-test "HTTP/1.1 422 Unprocessabl
e Entity"
============================================= warnings summary =============================================
app.py:664
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:664: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('customer_id')

app.py:677
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:677: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_name')

app.py:691
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:691: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('budget_amount')

app.py:700
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:700: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('geo_targets')

venv/lib/python3.13/site-packages/pydantic/fields.py:1062
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/pydantic/fields.
py:1062: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead.
 Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydant
ic.dev/2.11/migration/
    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)

app.py:838
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:838: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_id')

app.py:864
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:864: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('ad_group_name')

app.py:886
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:886: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('keywords')

app.py:929
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:929: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('max_cpc')

app.py:945
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:945: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('status')

tests/api/test_api_endpoints.py: 174 warnings
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/logging_config.py:34: DeprecationWarning: datetime
.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects t
o represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_health_check
tests/api/test_api_endpoints.py::TestRequestIdTracking::test_request_id_in_response
tests/api/test_api_endpoints.py::TestResponseFormat::test_success_response_format
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:274: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_keyword_ideas_health_check
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:293: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestHealthCheckEndpoints::test_api_status
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:314: DeprecationWarning: datetime.datetime.
utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represen
t datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_invalid_id
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/error_handlers.py:38: DeprecationWarning: datetime
.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects t
o represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self.timestamp = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
========================================= short test summary info ==========================================
FAILED tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_success - AttributeErro
r: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_customer_id - a
ssert 422 == 400
FAILED tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_invalid_customer_id - a
ssert 422 == 400
FAILED tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_missing_keywords - asse
rt 422 == 400
FAILED tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_google_ads_error - Attr
ibuteError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_success - Attribu
teError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestCampaignCreationEndpoint::test_create_campaign_google_ads_error 
- AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_success - Attribut
eError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_invalid_campaign_i
d - assert 422 == 400
FAILED tests/api/test_api_endpoints.py::TestAdGroupCreationEndpoint::test_create_ad_group_google_ads_error -
 AttributeError: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_customer_success - AttributeE
rror: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_success - AttributeE
rror: <module 'app' from '/Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py'> do...
FAILED tests/api/test_api_endpoints.py::TestValidationEndpoints::test_validate_campaign_invalid_id - assert 
422 == 400
FAILED tests/api/test_api_endpoints.py::TestErrorHandling::test_error_test_endpoint - assert 422 == 200
=============================== 14 failed, 13 passed, 190 warnings in 0.51s ================================

```

---

Now I can see the issues clearly. Let me update the subtask with my findings and create a plan to fix the failing tests:


---

<details>
          <summary>MCP tool call</summary>
      
*Called tool*: taskmaster-ai - update_subtask: Appends timestamped information to a specific subtask without replacing existing content. If you just want to update the subtask status, use set_task_status instead.

*Parameters*:
  * id: 8.2
  * prompt: ## Test Analysis and Issues Found

### Current Test Status:
- **13 tests PASSING** (Health checks, validation errors, request ID tracking, response format)
- **14 tests FAILING** due to several key issues:

### Main Issues Identified:

1. **Missing Function References**: Tests are trying to patch `app.get_google_ads_client` which doesn't exist in the current app.py
2. **Parameter Mismatch**: The `/keyword-ideas` endpoint expects `seed_keywords` but tests are using `q`
3. **Status Code Mismatch**: Tests expect 400 but getting 422 (Unprocessable Entity) for validation errors
4. **Missing Required Parameters**: Some endpoints require parameters that tests aren't providing

### Specific Problems:
- Keyword ideas tests: Using `q` parameter instead of `seed_keywords`
- Campaign/Ad Group tests: Trying to patch non-existent `get_google_ads_client` function
- Validation tests: Expecting 400 but getting 422 for validation errors
- Error test endpoint: Missing required `error_type` parameter

### Next Steps:
1. Fix parameter names in tests to match actual endpoint signatures
2. Update mock patches to target correct functions/classes
3. Adjust expected status codes (422 is correct for validation errors)
4. Add missing required parameters to test requests
5. Update test expectations to match actual API behavior
  * projectRoot: /Users/bernardojrodriguez/Documents/code/mcp-google-ads

*Result*:
{
  "data": {
    "message": "Successfully updated subtask with ID 8.2",
    "subtaskId": "8.2",
    "parentId": "8",
    "subtask": {
      "id": 2,
      "title": "Implement API endpoint tests",
      "description": "Create comprehensive tests for all API endpoints including keyword ideas, campaign creation, and other core functionality.",
      "dependencies": [
        "8.1"
      ],
      "details": "Develop tests for each endpoint using the TestClient. Create parameterized tests to cover different input scenarios. Test both successful responses and error cases. Verify correct status codes and response structures. Include tests for input validation and edge cases.\n<info added on 2025-08-03T02:01:04.580Z>\n## Test Analysis and Issues Found\n\n### Current Test Status:\n- **13 tests PASSING** (Health checks, validation errors, request ID tracking, response format)\n- **14 tests FAILING** due to several key issues:\n\n### Main Issues Identified:\n\n1. **Missing Function References**: Tests are trying to patch `app.get_google_ads_client` which doesn't exist in the current app.py\n2. **Parameter Mismatch**: The `/keyword-ideas` endpoint expects `seed_keywords` but tests are using `q`\n3. **Status Code Mismatch**: Tests expect 400 but getting 422 (Unprocessable Entity) for validation errors\n4. **Missing Required Parameters**: Some endpoints require parameters that tests aren't providing\n\n### Specific Problems:\n- Keyword ideas tests: Using `q` parameter instead of `seed_keywords`\n- Campaign/Ad Group tests: Trying to patch non-existent `get_google_ads_client` function\n- Validation tests: Expecting 400 but getting 422 for validation errors\n- Error test endpoint: Missing required `error_type` parameter\n\n### Next Steps:\n1. Fix parameter names in tests to match actual endpoint signatures\n2. Update mock patches to target correct functions/classes\n3. Adjust expected status codes (422 is correct for validation errors)\n4. Add missing required parameters to test requests\n5. Update test expectations to match actual API behavior\n</info added on 2025-08-03T02:01:04.580Z>",
      "status": "in-progress",
      "testStrategy": "Test each endpoint with valid inputs to verify successful operation. Test with invalid inputs to verify proper error handling. Use parameterized tests to cover multiple scenarios efficiently."
    },
    "tasksPath": "/Users/bernardojrodriguez/Documents/code/mcp-google-ads/.taskmaster/tasks/tasks.json",
    "useResearch": false,
    "telemetryData": {
      "timestamp": "2025-08-03T02:01:04.579Z",
      "userId": "1234567890",
      "commandName": "update-subtask",
      "modelUsed": "claude-3-7-sonnet-20250219",
      "providerName": "anthropic",
      "inputTokens": 2214,
      "outputTokens": 324,
      "totalTokens": 2538,
      "totalCost": 0.011502,
      "currency": "USD"
    },
    "tagInfo": {
      "currentTag": "master",
      "availableTags": [
        "master"
      ]
    }
  },
  "version": {
    "version": "0.21.0",
    "name": "task-master-ai"
  },
  "tag": {
    "currentTag": "master",
    "availableTags": [
      "master"
    ]
  }
}
</details>

---

Now let me fix the tests systematically. First, let me check the actual endpoint signatures to understand what parameters they expect:


---

Read file: app.py

---

Now I understand the issues. Let me fix the tests systematically. First, let me update the keyword ideas tests to use the correct parameter names:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 10, lines removed: 10

```diff
@@ -48,14 +48,14 @@
              mock_get_client.return_value = mock_client_instance
              
-             response = test_client.get(
-                 "/keyword-ideas",
-                 params={
-                     "customer_id": sample_customer_id,
-                     "q": ["digital marketing"],
-                     "geo": "2840",
-                     "lang": "1003",
-                     "limit": 5
-                 }
-             )
+                     response = test_client.get(
+             "/keyword-ideas",
+             params={
+                 "customer_id": sample_customer_id,
+                 "seed_keywords": "digital marketing",
+                 "geo_targets": "2840",
+                 "language": "en",
+                 "limit": 5
+             }
+         )
          
          assert response.status_code == 200
```

</details>

---

Let me fix the other keyword ideas tests as well:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 3, lines removed: 3

```diff
@@ -71,7 +71,7 @@
              "/keyword-ideas",
              params={
-                 "q": ["digital marketing"],
-                 "geo": "2840",
-                 "lang": "1003",
+                 "seed_keywords": "digital marketing",
+                 "geo_targets": "2840",
+                 "language": "en",
                  "limit": 5
              }
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 3, lines removed: 3

```diff
@@ -90,7 +90,7 @@
              params={
                  "customer_id": "invalid",
-                 "q": ["digital marketing"],
-                 "geo": "2840",
-                 "lang": "1003",
+                 "seed_keywords": "digital marketing",
+                 "geo_targets": "2840",
+                 "language": "en",
                  "limit": 5
              }
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -108,6 +108,6 @@
              params={
                  "customer_id": sample_customer_id,
-                 "geo": "2840",
-                 "lang": "1003",
+                 "geo_targets": "2840",
+                 "language": "en",
                  "limit": 5
              }
```

</details>

---

Now let me fix the mock patches. The tests are trying to patch `app.get_google_ads_client` but that function doesn't exist. Let me check what functions are actually available and update the patches:


---

<details>
            <summary>Grep search for "def get_" • **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L155 | `def get_user_friendly_error_message(error_msg: str) -> str:` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L186 | `def get_credentials_safe(self):` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L194 | `def get_headers_safe(self, creds):` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L309 | `async def get_api_status(request: Request = None):` |
| `file:///Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py` | L467 | `async def get_keyword_ideas(` |

</details>

---

Let me check what functions are imported from google_ads_server:


---

Read file: app.py

---

I can see that the app uses `get_credentials` and `get_headers` from `google_ads_server`. Let me update the tests to patch the correct functions and also fix the status code expectations. First, let me update the keyword ideas tests to patch the correct functions:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -41,5 +41,5 @@
          ]
          
-         with patch('app.get_google_ads_client') as mock_get_client:
+         with patch('app.get_credentials') as mock_get_credentials, patch('app.get_headers') as mock_get_headers:
              mock_client_instance = Mock()
              mock_service = Mock()
```

</details>

---

Now let me update the mock setup in the keyword ideas test:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 4, lines removed: 5

```diff
@@ -42,9 +42,8 @@
          
          with patch('app.get_credentials') as mock_get_credentials, patch('app.get_headers') as mock_get_headers:
-             mock_client_instance = Mock()
-             mock_service = Mock()
-             mock_service.generate_keyword_ideas.return_value = mock_response
-             mock_client_instance.get_service.return_value = mock_service
-             mock_get_client.return_value = mock_client_instance
+             mock_credentials = Mock()
+             mock_headers = {"Authorization": "Bearer test_token"}
+             mock_get_credentials.return_value = mock_credentials
+             mock_get_headers.return_value = mock_headers
              
                      response = test_client.get(
```

</details>

---

Now let me also patch the requests.post call to mock the API response:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -41,5 +41,5 @@
          ]
          
-         with patch('app.get_credentials') as mock_get_credentials, patch('app.get_headers') as mock_get_headers:
+         with patch('app.get_credentials') as mock_get_credentials, patch('app.get_headers') as mock_get_headers, patch('app.requests.post') as mock_post:
              mock_credentials = Mock()
              mock_headers = {"Authorization": "Bearer test_token"}
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 18, lines removed: undefined

```diff
@@ -46,4 +46,22 @@
              mock_get_credentials.return_value = mock_credentials
              mock_get_headers.return_value = mock_headers
+             
+             # Mock the API response
+             mock_response = Mock()
+             mock_response.status_code = 200
+             mock_response.json.return_value = {
+                 "results": [
+                     {
+                         "keywordIdea": {
+                             "text": "digital marketing agency",
+                             "keywordAnnotations": {
+                                 "searchVolume": 1000,
+                                 "competition": "HIGH"
+                             }
+                         }
+                     }
+                 ]
+             }
+             mock_post.return_value = mock_response
              
                      response = test_client.get(
```

</details>

---

Now let me fix the status code expectations. The tests expect 400 but FastAPI returns 422 for validation errors, which is correct. Let me update the expected status codes:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -95,5 +95,5 @@
          )
          
-         assert response.status_code == 400
+         assert response.status_code == 422
          data = response.json()
          assert data["status"] == "error"
```

</details>

---

The string to replace was not found in the file.

---

Let me check the current content around that line:


---

Read file: tests/api/test_api_endpoints.py

---

I can see the issue. The tests are expecting a specific response format but FastAPI returns a different format for validation errors. Let me fix the test expectations:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 2

```diff
@@ -97,6 +97,5 @@
          assert response.status_code == 422
          data = response.json()
-         assert data["status"] == "error"
-         assert "customer_id" in data["message"].lower()
+         assert "detail" in data
      
      @pytest.mark.api
```

</details>

---

The model provided an ambiguous search string to replace.

---

Let me fix them one by one. First, let me fix the invalid customer ID test:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -113,7 +113,7 @@
          )
          
-         assert response.status_code == 400
+         assert response.status_code == 422
          data = response.json()
-         assert data["status"] == "error"
+         assert "detail" in data
      
      @pytest.mark.api
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 2, lines removed: 3

```diff
@@ -130,8 +130,7 @@
          )
          
-         assert response.status_code == 400
+         assert response.status_code == 422
          data = response.json()
-         assert data["status"] == "error"
-         assert "keywords" in data["message"].lower()
+         assert "detail" in data
      
      @pytest.mark.api
```

</details>

---

Now let me fix the Google Ads error test to use the correct parameters and patches:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 12, lines removed: 11

```diff
@@ -135,27 +135,28 @@
      
      @pytest.mark.api
-     @patch('app.get_google_ads_client')
-     def test_keyword_ideas_google_ads_error(self, mock_get_client, test_client: TestClient, sample_customer_id: str):
+     @patch('app.requests.post')
+     def test_keyword_ideas_google_ads_error(self, mock_post, test_client: TestClient, sample_customer_id: str):
          """Test keyword ideas with Google Ads API error."""
-         from google.ads.googleads.errors import GoogleAdsException
          
-         # Mock Google Ads exception
-         mock_get_client.side_effect = GoogleAdsException("Test error")
+         # Mock API error response
+         mock_response = Mock()
+         mock_response.status_code = 401
+         mock_response.text = "Unauthorized"
+         mock_post.return_value = mock_response
          
          response = test_client.get(
              "/keyword-ideas",
              params={
                  "customer_id": sample_customer_id,
-                 "q": ["digital marketing"],
-                 "geo": "2840",
-                 "lang": "1003",
+                 "seed_keywords": "digital marketing",
+                 "geo_targets": "2840",
+                 "language": "en",
                  "limit": 5
              }
          )
          
-         assert response.status_code == 400
+         assert response.status_code == 401
          data = response.json()
-         assert data["status"] == "error"
-         assert "google ads" in data["message"].lower()
+         assert "detail" in data
  
  
```

</details>

---

Now let me fix the campaign creation tests. Let me check what the campaign creation endpoint actually does:


---

Read file: app.py

---

I can see that the campaign creation endpoint uses `GoogleAdsClient.load_from_storage('./google-ads.yaml')`. Let me update the campaign tests to patch the correct functions:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -167,5 +167,5 @@
      def test_create_campaign_success(self, test_client: TestClient, sample_campaign_data: Dict[str, Any]):
          """Test successful campaign creation."""
-         with patch('app.get_google_ads_client') as mock_get_client:
+         with patch('app.GoogleAdsClient') as mock_google_ads_client:
              mock_client_instance = Mock()
              
```

</details>

---

The model made no changes to the file.

---

Let me check the current content and fix the mock setup:


---

Read file: tests/api/test_api_endpoints.py

---

I can see the issue. The test is still referencing `mock_get_client` but it should be `mock_google_ads_client`. Let me fix this:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -187,5 +187,5 @@
              }.get(service_name)
              
-             mock_get_client.return_value = mock_client_instance
+             mock_google_ads_client.load_from_storage.return_value = mock_client_instance
              
              response = test_client.post(
```

</details>

---

Now let me fix the response expectations for the campaign creation test:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -196,5 +196,5 @@
          assert response.status_code == 200
          data = response.json()
-         assert data["status"] == "success"
+         assert data["success"] == True
          assert "campaign_id" in data
      
```

</details>

---

Now let me fix the Google Ads error test for campaign creation:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 3, lines removed: 3

```diff
@@ -233,11 +233,11 @@
      
      @pytest.mark.api
-     @patch('app.get_google_ads_client')
-     def test_create_campaign_google_ads_error(self, mock_get_client, test_client: TestClient, sample_campaign_data: Dict[str, Any]):
+     @patch('app.GoogleAdsClient')
+     def test_create_campaign_google_ads_error(self, mock_google_ads_client, test_client: TestClient, sample_campaign_data: Dict[str, Any]):
          """Test campaign creation with Google Ads API error."""
          from google.ads.googleads.errors import GoogleAdsException
          
          # Mock Google Ads exception
-         mock_get_client.side_effect = GoogleAdsException("Test error")
+         mock_google_ads_client.load_from_storage.side_effect = GoogleAdsException("Test error")
          
          response = test_client.post(
```

**Chunk 2**
Lines added: 1, lines removed: 1

```diff
@@ -246,5 +246,5 @@
          )
          
-         assert response.status_code == 400
+         assert response.status_code == 500
          data = response.json()
          assert data["status"] == "error"
```

</details>

---

Now let me fix the ad group tests similarly. Let me check what the ad group creation endpoint does:


---

Read file: app.py

---

Now let me fix the ad group tests. Let me update the ad group creation test:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -258,5 +258,5 @@
      def test_create_ad_group_success(self, test_client: TestClient, sample_ad_group_data: Dict[str, Any]):
          """Test successful ad group creation."""
-         with patch('app.get_google_ads_client') as mock_get_client:
+         with patch('app.GoogleAdsClient') as mock_google_ads_client:
              mock_client_instance = Mock()
              
```

</details>

---

Let me check the current ad group test structure and fix it:


---

Read file: tests/api/test_api_endpoints.py

---

Let me fix the ad group test by updating the mock setup and response expectations:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -278,5 +278,5 @@
              }.get(service_name)
              
-             mock_get_client.return_value = mock_client_instance
+             mock_google_ads_client.load_from_storage.return_value = mock_client_instance
              
              response = test_client.post(
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -287,5 +287,5 @@
          assert response.status_code == 200
          data = response.json()
-         assert data["status"] == "success"
+         assert data["success"] == True
          assert "ad_group_id" in data
          assert "keywords_added" in data
```

</details>

---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 3, lines removed: 3

```diff
@@ -326,11 +326,11 @@
      
      @pytest.mark.api
-     @patch('app.get_google_ads_client')
-     def test_create_ad_group_google_ads_error(self, mock_get_client, test_client: TestClient, sample_ad_group_data: Dict[str, Any]):
+     @patch('app.GoogleAdsClient')
+     def test_create_ad_group_google_ads_error(self, mock_google_ads_client, test_client: TestClient, sample_ad_group_data: Dict[str, Any]):
          """Test ad group creation with Google Ads API error."""
          from google.ads.googleads.errors import GoogleAdsException
          
          # Mock Google Ads exception
-         mock_get_client.side_effect = GoogleAdsException("Test error")
+         mock_google_ads_client.load_from_storage.side_effect = GoogleAdsException("Test error")
          
          response = test_client.post(
```

</details>

---

Now let me run the tests again to see how many issues we've fixed:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v --tb=short
```

```
=========================================== test session starts ============================================
platform darwin -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0 -- /Users/bernardojrodriguez/Documents/code/mcp
-google-ads/venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'macOS-15.5-arm64-arm-64bit-Mach-O', 'Packages': {'pytest': '8.4.
1', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'html': '4.1.1', 'asyncio': '1.1.0', 'metadata': '3.1.
1', 'cov': '6.2.1', 'mock': '3.14.1'}}
rootdir: /Users/bernardojrodriguez/Documents/code/mcp-google-ads
configfile: pytest.ini
plugins: anyio-4.9.0, html-4.1.1, asyncio-1.1.0, metadata-3.1.1, cov-6.2.1, mock-3.14.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 0 items / 1 error                                                                                

================================================== ERRORS ==================================================
_____________________________ ERROR collecting tests/api/test_api_endpoints.py _____________________________
venv/lib/python3.13/site-packages/_pytest/python.py:498: in importtestmodule
    mod = import_path(
venv/lib/python3.13/site-packages/_pytest/pathlib.py:587: in import_path
    importlib.import_module(module_name)
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/_
_init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1387: in _gcd_import
    ???
<frozen importlib._bootstrap>:1360: in _find_and_load
    ???
<frozen importlib._bootstrap>:1331: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:935: in _load_unlocked
    ???
venv/lib/python3.13/site-packages/_pytest/assertion/rewrite.py:177: in exec_module
    source_stat, co = _rewrite_test(fn, self.config)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
venv/lib/python3.13/site-packages/_pytest/assertion/rewrite.py:357: in _rewrite_test
    tree = ast.parse(source, filename=strfn)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.5/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ast.py:50: 
in parse
    return compile(source, filename, mode, flags,
E     File "/Users/bernardojrodriguez/Documents/code/mcp-google-ads/tests/api/test_api_endpoints.py", line 6
7
E       response = test_client.get(
E   IndentationError: unexpected indent
--------------------------------------------- Captured stderr ----------------------------------------------
2025-08-02 20:04:38,891 - google_ads_server - INFO - Environment variables loaded from .env file
============================================= warnings summary =============================================
app.py:664
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:664: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('customer_id')

app.py:677
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:677: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_name')

app.py:691
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:691: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('budget_amount')

app.py:700
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:700: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('geo_targets')

venv/lib/python3.13/site-packages/pydantic/fields.py:1062
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/venv/lib/python3.13/site-packages/pydantic/fields.
py:1062: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead.
 Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydant
ic.dev/2.11/migration/
    warn('`min_items` is deprecated and will be removed, use `min_length` instead', DeprecationWarning)

app.py:838
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:838: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('campaign_id')

app.py:864
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:864: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('ad_group_name')

app.py:886
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:886: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('keywords')

app.py:929
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:929: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('max_cpc')

app.py:945
  /Users/bernardojrodriguez/Documents/code/mcp-google-ads/app.py:945: PydanticDeprecatedSince20: Pydantic V1
 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` va
lidators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See P
ydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    @validator('status')

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
========================================= short test summary info ==========================================
ERROR tests/api/test_api_endpoints.py
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
====================================== 10 warnings, 1 error in 0.15s =======================================

```

---

There's an indentation error in the test file. Let me fix it:


---

Read file: tests/api/test_api_endpoints.py

---

I can see the indentation issue. The `response = test_client.get(` line is incorrectly indented. Let me fix it:


---

<details><summary>Edit file: tests/api/test_api_endpoints.py</summary>

undefined

**Chunk 1**
Lines added: 10, lines removed: 10

```diff
@@ -65,14 +65,14 @@
              mock_post.return_value = mock_response
              
-                     response = test_client.get(
-             "/keyword-ideas",
-             params={
-                 "customer_id": sample_customer_id,
-                 "seed_keywords": "digital marketing",
-                 "geo_targets": "2840",
-                 "language": "en",
-                 "limit": 5
-             }
-         )
+             response = test_client.get(
+                 "/keyword-ideas",
+                 params={
+                     "customer_id": sample_customer_id,
+                     "seed_keywords": "digital marketing",
+                     "geo_targets": "2840",
+                     "language": "en",
+                     "limit": 5
+                 }
+             )
          
          assert response.status_code == 200
```

</details>

---

Now let me run the tests again to see if the indentation error is fixed:


---

```bash
source venv/bin/activate && python -m pytest tests/api/test_api_endpoints.py -v --tb=short
```

```
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_defaul
t_test_loop_scope=function
collected 27 items                                                                
                         

tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_succ
ess PASSED         [  3%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_miss
ing_customer_id PASSED [  7%]
tests/api/test_api_endpoints.py::TestKeywordIdeasEndpoint::test_keyword_ideas_inva
```

---



---

_**User**_

continue

---

_**Assistant**_



---

